{"version":3,"sources":["webpack:///./src/components/tflib/model.js","webpack:///./src/components/tflib/train.js","webpack:///./src/components/layer.js","webpack:///./src/components/canvas.js","webpack:///./src/pages/mnistpred.js","webpack:///./.cache/gatsby-browser-entry.js","webpack:///./.cache/public-page-renderer.js","webpack:///./src/assets/images/omega.png","webpack:///./.cache/public-page-renderer-prod.js","webpack:///./src/components/menu.js","webpack:///./src/components/banner.js","webpack:///./src/components/footer.js","webpack:///./src/components/layout.js"],"names":["Model","props","_React$Component","call","this","render","parseLayerElement","element","lname","tf","conv2d","dense","flatten","maxPooling2d","Error","_compile","_this","_this$props","children","optimizer","loss","metrics","onCompile","layers","React","Children","toArray","model","map","child","add","compile","componentDidUpdate","prevProps","componentDidMount","Component","Train","_this2","state","allcharts","modelElement","trainer","dcolors","backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","_this3","only","wrappedModelElement","cloneElement","_train","next","setState","draw_metrics","_this4","Object","keys","metric","ldata","react_default","a","createElement","key","className","es","data","display","metricElems","shouldComponentUpdate","nextProps","nextState","train","wrapAsyncGenerator_default","regenerator_default","mark","_callee","trainData","samples","validationData","epochs","batchSize","onBatchEnd","epoch","trainGenerator","batch","trainBatch","history","fitMetrics","valGenerator","valBatch","valMetrics","_history","i","wrap","_context","prev","_getBatch","awaitAsyncGenerator_default","fit","xs","ys","shape","sent","_pushMetrics","Infinity","evaluate","length","metricsNames","onTrainEnd","stop","generator","sample","value","push","x","y","stack","arr","_this5","updatedMetrics","assign","values","achart","labels","parseInt","datasets","label","Layer","Canvas","imgdigit","draw_digit","mnist","digit","ctx","refs","canvas","getContext","draw","ref","width","height","mnistTrainDataGenerator","mnistTestDataGenerator","set","training","test","_iterator","_isArray","_i","_ref","Array","isArray","Symbol","iterator","abrupt","done","input","reshape","output","_marked","_iterator2","_isArray2","_i2","_ref2","_context2","_marked2","MnistModel","tflib_train","model_Model","sgd","layer_Layer","inputShape","kernelSize","filters","strides","activation","kernelInitializer","poolSize","units","Mnist","_React$Component2","trained","predicted","predict","testDigits","get","probTensor","predictedArr","dataSync","probArr","prddgt","imgpred","canvas_Canvas","Math","round","layout","Helmet_default","name","content","onClick","mnistpred_MnistModel","__webpack_require__","r","__webpack_exports__","d","graphql","StaticQueryContext","StaticQuery","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","prop_types__WEBPACK_IMPORTED_MODULE_1__","prop_types__WEBPACK_IMPORTED_MODULE_1___default","gatsby_link__WEBPACK_IMPORTED_MODULE_2__","gatsby_link__WEBPACK_IMPORTED_MODULE_2___default","_wait_for_route_change__WEBPACK_IMPORTED_MODULE_3__","_public_page_renderer__WEBPACK_IMPORTED_MODULE_4__","_public_page_renderer__WEBPACK_IMPORTED_MODULE_4___default","_parse_path__WEBPACK_IMPORTED_MODULE_5__","createContext","Consumer","staticQueryData","query","propTypes","PropTypes","object","string","isRequired","func","m","module","exports","require","default","p","ProdPageRenderer","location","pageResources","loader","getResourcesForPathnameSync","pathname","InternalPageRenderer","json","Menu","showmenu","open","scrolly","curscrolly","autotimeout","start","_isMounted","window","addEventListener","handlescroll","componentWillUnmount","clearTimeout","removeEventListener","hidemenu","btnClicked","autoclose","now","Date","getSeconds","_this6","scrollY","setTimeout","_this7","gatsby_browser_entry","to","index_es","icon","faCoffee","href","faGithub","faHome","faPen","Banner","menu_Menu","src","omega","alt","Footer","Layout","banner","footer"],"mappings":"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","file":"component---src-pages-mnistpred-js-87cc984f0151f0d58c2e.js","sourcesContent":["import React from 'react';\nimport * as tf from '@tensorflow/tfjs';\n\nexport default class Model extends React.Component {\n  \n  constructor(props) {\n    super(props)\n  }\n\n  render() {\n    return null;\n  }\n\n  parseLayerElement(element) {\n    //console.log(element.props.lname)\n    switch (element.props.lname) {\n    case \"Conv2D\":\n      return tf.layers.conv2d(element.props);\n    case \"Dense\":\n      return tf.layers.dense(element.props);\n    case \"Flatten\":\n      return tf.layers.flatten(element.props);\n    case \"MaxPooling2D\":\n      return tf.layers.maxPooling2d(element.props);\n    default:\n      throw new Error('Invalid Layer', element);\n    }\n  }\n  \n\n  _compile() {\n    const {\n      children,\n      optimizer,\n      loss,\n      metrics,\n      onCompile,\n    } = this.props;\n\n    const layers = React.Children.toArray(children);\n    //console.log( layers )\n\n    const model = tf.sequential();\n    layers.map(child => {\n      if(child) { \n        model.add(this.parseLayerElement(child))\n       }\n       else{ console.log(\"No fuking layer...\")}\n    })\n\n\n    model.compile({\n      optimizer,\n      loss,\n      metrics,\n    });\n\n    if (typeof onCompile === 'function') {\n      onCompile(model);\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props != prevProps)\n      this._compile();\n  }\n\n  componentDidMount() {\n    this._compile();\n  }\n}\n\n","import React from 'react'\nimport * as tf from '@tensorflow/tfjs'\nimport { Bar, Line, Pie } from 'react-chartjs-2'\nimport '../../assets/css/ml.css'\nimport PropTypes from 'prop-types'\n\nclass Train extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      metrics: {},\n      allcharts: {},\n      modelElement: null,\n    }\n\n    this.trainer = null\n    this.dcolors = {\n      backgroundColor: 'rgba(252, 145, 58,0.2)',\n      borderColor: 'rgba(252, 145, 58,1)',\n      borderWidth: 1,\n      hoverBackgroundColor: 'rgba(252, 145, 58,0.4)',\n      hoverBorderColor: 'rgba(252, 145, 58,1)',\n    }\n  }\n\n  // Initialize the child model and create trainer after model is compiled.\n  componentDidMount() {\n    const modelElement = React.Children.only(this.props.children)\n    const wrappedModelElement = React.cloneElement(modelElement, {\n      onCompile: model => {\n        this.trainer = this._train(model)\n        this.trainer.next()\n      },\n    })\n\n    this.setState({\n      modelElement: wrappedModelElement,\n    })\n  }\n\n  draw_metrics() {\n    const metricElems = Object.keys(this.state.metrics).map(metric => {\n      const values = this.state.metrics[metric]\n      const ldata = this.state.allcharts[metric]\n      return (\n        <div key={metric} className=\"d200 boxshadow\">\n          <Line data={ldata} />\n        </div>\n      )\n    })\n\n    return metricElems\n  }\n\n  render() {\n    if (!this.props.display) {\n      return this.state.modelElement\n    }\n\n    const metricElems = this.draw_metrics()\n\n    return (\n      <div>\n        <div className=\"chart\">{metricElems}</div>\n        {this.state.modelElement}\n      </div>\n    )\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    return (\n      //this.props.display != nextProps.display ||\n      this.props.train != nextProps.train ||\n      this.state.modelElement != nextState.modelElement ||\n      this.state.metrics != nextState.metrics\n    )\n  }\n\n  componentDidUpdate(prevProps) {\n    // Resume training if train state was changed to true\n    if (this.props.train && !prevProps.train && this.trainer != null) {\n      this.trainer.next()\n    }\n  }\n\n  async *_train(model) {\n    const {\n      trainData,\n      samples,\n      validationData,\n      epochs,\n      batchSize,\n      display,\n    } = this.props\n\n    // TODO: Switch to PropTypes\n    const onBatchEnd =\n      typeof this.props.onBatchEnd === 'function'\n        ? this.props.onBatchEnd\n        : () => {}\n    // maybe done !\n    //const onBatchEnd = this.props.onBatchEnd\n\n    for (let epoch = 0; epoch < epochs; epoch++) {\n      const trainGenerator = trainData()\n      for (let batch = 0; batch * batchSize < samples; batch++) {\n        // Pause training when train prop is false\n        const train = this.props.train\n        if (!train) {\n          yield\n        }\n\n        const trainBatch = this._getBatch(trainGenerator, batchSize)\n        const history = await model.fit(trainBatch.xs, trainBatch.ys, {\n          batchSize: trainBatch.xs.shape[0],\n          epochs: 1,\n        })\n        onBatchEnd(history.history, model)\n        tf.dispose(trainBatch)\n\n        if (display) {\n          const fitMetrics = history.history\n          this._pushMetrics(fitMetrics)\n          await tf.nextFrame()\n        }\n      }\n\n      if (validationData) {\n        const valGenerator = validationData()\n        // Just get all the validation data at once\n        const valBatch = this._getBatch(valGenerator, Infinity)\n        const valMetrics = model.evaluate(valBatch.xs, valBatch.ys, {\n          batchSize,\n        })\n        const history = {}\n\n        for (let i = 0; i < valMetrics.length; i++) {\n          const metric = model.metricsNames[i]\n          history[`validation-${metric}`] = await valMetrics[i].data()\n        }\n\n        this._pushMetrics(history)\n\n        tf.dispose(valMetrics)\n        tf.dispose(valBatch)\n      }\n    }\n\n    this.props.onTrainEnd(model)\n  }\n\n  _getBatch(generator, batchSize = 32) {\n    const xs = []\n    const ys = []\n\n    for (let i = 0; i < batchSize; i++) {\n      const sample = generator.next().value\n\n      if (sample == null) {\n        break\n      }\n\n      xs.push(sample.x)\n      ys.push(sample.y)\n    }\n\n    if (xs.length === 0) {\n      throw new Error(\n        'No data returned from data generator for batch, check sample length'\n      )\n    }\n\n    // Either stack if it's a generator of tensors, or convert to tensor if\n    // it's a generator of JS arrs\n    const stack = arr =>\n      arr[0] instanceof tf.Tensor ? tf.stack(arr) : tf.tensor(arr)\n\n    return {\n      xs: stack(xs),\n      ys: stack(ys),\n    }\n  }\n\n  _pushMetrics(metrics) {\n    const updatedMetrics = { ...this.state.metrics }\n    Object.keys(metrics).map(metric => {\n      if (updatedMetrics[metric] == null) {\n        updatedMetrics[metric] = []\n      }\n      updatedMetrics[metric].push(metrics[metric][0])\n      //const values = this.state.metrics[metric];\n      const values = updatedMetrics[metric]\n      const achart = {\n        labels: Object.keys(values).map(i => parseInt(i, 10)),\n        datasets: [\n          {\n            label: metric,\n            data: values,\n            ...this.dcolors,\n          },\n        ],\n      }\n\n      this.setState(state => {\n        state.allcharts[metric] = achart\n        return state\n      })\n    })\n    this.setState({\n      metrics: updatedMetrics,\n    })\n  }\n}\n\n// Train.propTypes = {\n//   onBatchEnd: React.PropTypes.func,\n// }\n\nexport default Train\n","import React, { Component } from 'react'\n\nexport default class Layer extends Component {\n\n    render() {\n        return null;\n      }\n    \n}\n","import React from 'react'\n//import mnist from 'mnist';\n\nexport default class Canvas extends React.Component {\n  constructor(props) {\n    super(props)\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    return this.props.imgdigit != nextProps.imgdigit\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.imgdigit) {\n      this.draw_digit()\n    }\n  }\n\n  componentDidMount() {\n    this.draw_digit()\n  }\n\n  draw_digit() {\n    const mnist = this.props.mnist\n    const digit = this.props.imgdigit\n    const canvas = this.refs.canvas\n    const ctx = canvas.getContext('2d')\n    mnist.draw(digit, ctx)\n  }\n  render() {\n    return (\n      <div>\n        <canvas\n          ref=\"canvas\"\n          width={this.props.width}\n          height={this.props.height}\n        />\n      </div>\n    )\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport Model from '../components/tflib/model'\nimport Train from '../components/tflib/train'\nimport Layer from '../components/layer'\nimport * as tf from '@tensorflow/tfjs'\nimport mnist from 'mnist'\nimport Canvas from '../components/canvas'\nimport Layout from '../components/layout'\nimport Helmet from 'react-helmet'\n\nimport '../assets/css/ml.css'\n\n//import { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\n//import { faPlay, faPause } from '@fortawesome/free-solid-svg-icons'\n//import { faGithub } from '@fortawesome/free-brands-svg-icons'\n\nconst data = mnist.set(1500, 100)\nconst train = data.training\nconst test = data.test\n\nfunction* mnistTrainDataGenerator() {\n  for (let sample of train) {\n    const square_sample = tf.tensor1d(sample.input).reshape([28, 28])\n    yield {\n      x: tf.tensor1d(sample.input).reshape([28, 28, 1]),\n      y: sample.output,\n    }\n  }\n}\n\nfunction* mnistTestDataGenerator() {\n  for (let sample of test) {\n    const square_sample = tf.tensor1d(sample.input).reshape([28, 28])\n    yield {\n      x: tf.tensor1d(sample.input).reshape([28, 28, 1]),\n      y: sample.output,\n    }\n  }\n}\n\nclass MnistModel extends React.Component {\n  render() {\n    return (\n      <Train\n        trainData={mnistTrainDataGenerator}\n        samples={1500}\n        validationData={mnistTestDataGenerator}\n        onBatchEnd={this.props.onBatchEnd}\n        epochs={5}\n        batchSize={64}\n        onTrainEnd={this.props.onTrainEnd}\n        train={this.props.train}\n        display\n      >\n        <Model\n          optimizer={tf.train.sgd(0.15)}\n          loss=\"categoricalCrossentropy\"\n          metrics={['accuracy']}\n        >\n          <Layer\n            lname=\"Conv2D\"\n            inputShape={[28, 28, 1]}\n            kernelSize={5}\n            filters={8}\n            strides={1}\n            activation=\"relu\"\n            kernelInitializer=\"VarianceScaling\"\n          />\n          <Layer lname=\"MaxPooling2D\" poolSize={[2, 2]} strides={[2, 2]} />\n          <Layer\n            lname=\"Conv2D\"\n            kernelSize={5}\n            filters={16}\n            strides={1}\n            activation=\"relu\"\n            kernelInitializer=\"VarianceScaling\"\n          />\n          <Layer lname=\"MaxPooling2D\" poolSize={[2, 2]} strides={[2, 2]} />\n          <Layer lname=\"Flatten\" />\n          <Layer\n            lname=\"Dense\"\n            units={10}\n            kernelInitializer=\"VarianceScaling\"\n            activation=\"softmax\"\n          />\n        </Model>\n      </Train>\n    )\n  }\n}\n\nexport default class Mnist extends React.Component {\n  constructor() {\n    super()\n    this.state = {\n      model: null,\n      training: false,\n      trained: false,\n      predicted: null,\n    }\n  }\n\n  predict() {\n    const testDigits = [1, 3, 4, 5, 8]\n    // Randomly selects a test digit, ideally this is drawn from the val\n    // set. But it's just random for now.\n    const test = tf.stack(\n      testDigits.map(digit => {\n        return tf.tensor1d(mnist[digit].get()).reshape([28, 28, 1])\n      })\n    )\n    const probTensor = this.state.model.predict(test)\n    //probTensor.print()\n    const predictedArr = tf.argMax(probTensor, 1).dataSync()\n    console.log(predictedArr)\n    const probArr = probTensor.dataSync()\n    this.setState({\n      predicted: testDigits.map((digit, i) => {\n        const imgdigit = mnist[digit].get()\n        const prddgt = predictedArr[i]\n        const imgpred = mnist[prddgt].get()\n        return (\n          <div key={i} className=\"boxshadow\">\n            <span className=\"bspant\"> Real </span>\n            <Canvas width={28} height={28} mnist={mnist} imgdigit={imgdigit} />\n            <Canvas width={28} height={28} mnist={mnist} imgdigit={imgpred} />\n            <span className={digit == prddgt ? 'bspang' : 'bspanr'}>\n              {'Pred: ' + Math.round(probArr[i * 10 + digit] * 100)}%{' '}\n            </span>\n          </div>\n        )\n      }),\n    })\n  }\n\n  render() {\n    return (\n      <Layout>\n        <Helmet>\n          <title>Mnist - Prediction </title>\n          <meta name=\"description\" content=\"Generic Page\" />\n        </Helmet>\n        <section className=\"container\">\n          <header className=\"bheader\">\n            <h2> Mnist Convolutional Neural Network Prediction </h2>\n          </header>\n          <div className=\"btdiv\">\n            <button\n              className=\" special boxshadow\"\n              onClick={() => this.setState({ training: !this.state.training })}\n            >\n              {this.state.training ? ' Pause' : ' Train'}\n            </button>\n\n            {this.state.trained && (\n              <button\n                className=\"special boxshadow\"\n                onClick={() => this.predict()}\n              >\n                Predict\n              </button>\n            )}\n          </div>\n\n          <div className=\"prob\">{this.state.predicted}</div>\n\n          <MnistModel\n            onTrainEnd={model => this.setState({ model })}\n            onBatchEnd={(metrics, model) =>\n              this.setState({ model, trained: true })\n            }\n            train={this.state.training}\n          />\n        </section>\n      </Layout>\n    )\n  }\n}\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\nimport Link, {\n  withPrefix,\n  navigate,\n  push,\n  replace,\n  navigateTo,\n} from \"gatsby-link\"\nimport { waitForRouteChange } from \"./wait-for-route-change\"\nimport PageRenderer from \"./public-page-renderer\"\nimport parsePath from \"./parse-path\"\n\nconst StaticQueryContext = React.createContext({})\n\nconst StaticQuery = props => (\n  <StaticQueryContext.Consumer>\n    {staticQueryData => {\n      if (\n        props.data ||\n        (staticQueryData[props.query] && staticQueryData[props.query].data)\n      ) {\n        return (props.render || props.children)(\n          props.data ? props.data.data : staticQueryData[props.query].data\n        )\n      } else {\n        return <div>Loading (StaticQuery)</div>\n      }\n    }}\n  </StaticQueryContext.Consumer>\n)\n\nStaticQuery.propTypes = {\n  data: PropTypes.object,\n  query: PropTypes.string.isRequired,\n  render: PropTypes.func,\n  children: PropTypes.func,\n}\n\nfunction graphql() {\n  throw new Error(\n    `It appears like Gatsby is misconfigured. Gatsby related \\`graphql\\` calls ` +\n      `are supposed to only be evaluated at compile time, and then compiled away,. ` +\n      `Unfortunately, something went wrong and the query was left in the compiled code.\\n\\n.` +\n      `Unless your site has a complex or custom babel/Gatsby configuration this is likely a bug in Gatsby.`\n  )\n}\n\nexport {\n  Link,\n  withPrefix,\n  graphql,\n  parsePath,\n  navigate,\n  push, // TODO replace for v3\n  replace, // TODO remove replace for v3\n  navigateTo, // TODO: remove navigateTo for v3\n  StaticQueryContext,\n  StaticQuery,\n  PageRenderer,\n  waitForRouteChange,\n}\n","const preferDefault = m => (m && m.default) || m\n\nif (process.env.BUILD_STAGE === `develop`) {\n  module.exports = preferDefault(require(`./public-page-renderer-dev`))\n} else if (process.env.BUILD_STAGE === `build-javascript`) {\n  module.exports = preferDefault(require(`./public-page-renderer-prod`))\n} else {\n  module.exports = () => null\n}\n","module.exports = __webpack_public_path__ + \"static/omega-af1c1859ddb4517d35947043794fe64d.png\";","import React from \"react\"\nimport PropTypes from \"prop-types\"\n\nimport InternalPageRenderer from \"./page-renderer\"\nimport loader from \"./loader\"\n\nconst ProdPageRenderer = ({ location }) => {\n  const pageResources = loader.getResourcesForPathnameSync(location.pathname)\n  return React.createElement(InternalPageRenderer, {\n    key: location.pathname,\n    location,\n    pageResources,\n    ...pageResources.json,\n  })\n}\n\nProdPageRenderer.propTypes = {\n  location: PropTypes.shape({\n    pathname: PropTypes.string.isRequired,\n  }).isRequired,\n}\n\nexport default ProdPageRenderer\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Link } from 'gatsby'\nimport '../assets/css/menu.css'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faCoffee, faHome, faPen } from '@fortawesome/free-solid-svg-icons'\nimport { faGithub } from '@fortawesome/free-brands-svg-icons'\n\nexport default class Menu extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      showmenu: false,\n      open: false,\n    }\n    this.scrolly = 0\n    this.curscrolly = 0\n    this.autotimeout = null\n    this.start = null\n    this._isMounted = false\n  }\n\n  componentDidMount() {\n    this._isMounted = true\n    this.start = null\n    this.scrolly = 0\n    window.addEventListener('scroll', () => this.handlescroll())\n  }\n\n  componentWillUnmount() {\n    this._isMounted = false\n    clearTimeout(this.autotimeout)\n    window.removeEventListener('scroll', () => this.handlescroll())\n  }\n\n  hidemenu() {\n    console.log(this._isMounted)\n    if (this._isMounted) {\n      this.setState(\n        {\n          showmenu: false,\n          open: false,\n        },\n        () => console.log('in hide', JSON.stringify(this.state))\n      )\n    }\n  }\n\n  btnClicked() {\n    if (this._isMounted) {\n      this.setState(\n        {\n          open: !this.state.open,\n        },\n        () => {\n          console.log('in btn', JSON.stringify(this.state))\n          this.autoclose()\n        }\n      )\n    }\n  }\n\n  autoclose() {\n    if (this.state.showmenu && !this.state.open) {\n      const now = new Date().getSeconds()\n      if (this.start !== null && now - this.start > 5) {\n        console.log(this.start, now)\n        console.log('in auto ', JSON.stringify(this.state))\n        this.hidemenu()\n      }\n    }\n  }\n\n  handlescroll() {\n    this.curscrolly = window.scrollY\n    if (this.scrolly !== this.curscrolly) {\n      if (this._isMounted) {\n        this.setState(\n          {\n            showmenu: true,\n            open: false,\n          },\n          () => (this.scrolly = this.curscrolly)\n        )\n      }\n    }\n    this.start = new Date().getSeconds()\n    clearTimeout(this.autotimeout)\n    this.autotimeout = setTimeout(() => {\n      this.autoclose()\n    }, 6000)\n  }\n\n  render() {\n    return (\n      <nav className={`menu ${this.state.showmenu ? 'visible' : 'hidden'}`}>\n        <div\n          onClick={() => this.btnClicked()}\n          className={`menu-btn ${this.state.open ? 'menu-btn-open' : ' '}`}\n        >\n          <span\n            className={`lines ${this.state.open ? 'line-1-clicked' : 'line-1'}`}\n          />\n          <span\n            className={`lines ${this.state.open ? 'line-2-clicked' : 'line-2'}`}\n          />\n          <span\n            className={`lines ${this.state.open ? 'line-3-clicked' : 'line-3'}`}\n          />\n        </div>\n        <Link\n          onClick={() => this.hidemenu()}\n          className=\"alink menu-item blue\"\n          to=\"/mnistpred\"\n        >\n          <i className=\"icon\">\n            <FontAwesomeIcon icon={faCoffee} />\n          </i>\n        </Link>\n\n        <a\n          onClick={() => this.hidemenu()}\n          href=\"https://github.com/DanShai\"\n          className=\"alink menu-item green\"\n        >\n          <i className=\"icon\">\n            <FontAwesomeIcon icon={faGithub} />{' '}\n          </i>\n        </a>\n\n        <Link\n          onClick={() => this.hidemenu()}\n          className=\"alink menu-item red\"\n          to=\"/\"\n        >\n          <i className=\"icon\">\n            <FontAwesomeIcon icon={faHome} />\n          </i>\n        </Link>\n\n        <Link\n          onClick={() => this.hidemenu()}\n          className=\"alink menu-item pumpkin\"\n          to=\"/blog\"\n        >\n          <i className=\"icon\">\n            <FontAwesomeIcon icon={faPen} />\n          </i>\n        </Link>\n      </nav>\n    )\n  }\n}\n","import React from 'react'\nimport '../assets/css/styles.css'\nimport omega from '../assets/images/omega.png'\nimport Menu from './menu'\n\nconst Banner = props => (\n  <section className=\"banner\">\n    <Menu />\n    <div className=\"banner-content\">\n      <img src={omega} className=\"logo\" alt=\"Dan Shai\" />\n      <div className=\"title\">Dan Shai</div>\n    </div>\n  </section>\n)\n\nexport default Banner\n","import React from 'react'\n\nconst Footer = props => (\n  <section className=\"footer center bg-dark\">\n    <p>\n      {' '}\n      <span> Dan shai &copy; 2018 </span>{' '}\n    </p>\n  </section>\n)\n\nexport default Footer\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport '../assets/css/styles.css'\nimport Banner from './banner'\nimport Footer from './footer'\n\nclass Layout extends React.Component {\n  constructor(props) {\n    super(props)\n  }\n\n  render() {\n    const { children } = this.props\n    return (\n      <div>\n        <Banner />\n        {children}\n        <Footer />\n      </div>\n    )\n  }\n}\n\nexport default Layout\n"],"sourceRoot":""}